<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.1.1" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.1.1" type="image/png" sizes="32x32"><meta name="description" content="A fellow administrator had the task of re-allocating precious space on a server, that meant partitions would be moved around. Apparently during the process the swap partition was resized which resulte">
<meta property="og:type" content="article">
<meta property="og:title" content="Restore missing swap on Linux system">
<meta property="og:url" content="http://linhost.info/2009/04/22/restore-missing-swap-on-linux-system/index.html">
<meta property="og:site_name" content="Linhost.info">
<meta property="og:description" content="A fellow administrator had the task of re-allocating precious space on a server, that meant partitions would be moved around. Apparently during the process the swap partition was resized which resulte">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://lh6.ggpht.com/_fF0LO28FGYY/SekmNh2a4bI/AAAAAAAAAjs/6ThjKR2hNyU/s800/001.png">
<meta property="article:published_time" content="2009-04-22T18:50:18.000Z">
<meta property="article:modified_time" content="2020-08-09T09:07:53.463Z">
<meta property="article:author" content="Moody Gent">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="swap">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://lh6.ggpht.com/_fF0LO28FGYY/SekmNh2a4bI/AAAAAAAAAjs/6ThjKR2hNyU/s800/001.png"><title>Restore missing swap on Linux system | Linhost.info</title><link ref="canonical" href="http://linhost.info/2009/04/22/restore-missing-swap-on-linux-system/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.1.1"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><script src="https://www.googletagmanager.com/gtag/js?id=UA-12345678-9" async=""></script><script>if (window.location.hostname !== 'localhost') {
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'UA-12345678-9');
}</script><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.0.0"><link rel="alternate" href="/atom.xml" title="Linhost.info" type="application/atom+xml">
</head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Linhost.info</div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">Restore missing swap on Linux system</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2009-04-22</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2020-08-09</span></span></div></header><div class="post-body"><p>A fellow administrator had the task of re-allocating precious space on a server, that meant partitions would be moved around. Apparently during the process the swap partition was resized which resulted on the system loosing all of the available swap, despite the fact that the partition was never actually deleted. <img src="http://lh6.ggpht.com/_fF0LO28FGYY/SekmNh2a4bI/AAAAAAAAAjs/6ThjKR2hNyU/s800/001.png"> After noticing the problem I decided to check <strong>/etc/fstab</strong>, I could see an entry for swap at boot. However the partition was not being mount it during boot up, leading me to believe that the <strong>UUID</strong> might have changed. <strong>UUID</strong> - <em>Universally Unique Identifier</em></p>

        <h2 id="blkid"   >
          <a href="#blkid" class="heading-link"><i class="fas fa-link"></i></a>blkid</h2>
      <p>First use the <strong>blkid</strong> program to determine the new <strong>UUID</strong> of the swap partition. Look for the entry with the <strong>TYPE=”swap”</strong> and copy the <strong>UUID</strong>.</p>
<p>$ blkid<br>/dev/ramzswap0: TYPE=”swap”<br>/dev/sda1: UUID=”8192a29b-e191-4347-a65c-3be8546a5c5c” TYPE=”ext3”<br>/dev/sda5: TYPE=”swap” UUID=”b6a5fce4-9938-4518-809a-2cd0f5e194e8”<br>/dev/loop0: TYPE=”squashfs”</p>
<p>Now open <strong>/etc/fstab</strong> and visually compare the swap <strong>UUID</strong> output from <strong>blkid</strong> with the current entry on <strong>fstab</strong> which should be different.</p>
<p>nano /etc/fstab</p>
<p>My swap partition is located in <strong>/dev/sda5</strong>.</p>
<p># /dev/sda5<br>UUID=55a68fbd-2f25-447b-99fd-02e972937a3c none            swap    sw              0       0</p>
<p>Because they are different the problem is evident the <strong>UUID</strong> changed, meaning the system no longer has the correct swap <strong>UUID</strong> to call on boot up.</p>

        <h2 id="Solution"   >
          <a href="#Solution" class="heading-link"><i class="fas fa-link"></i></a>Solution</h2>
      <p>The solution is simple just remove the old swap <strong>UUID</strong> entry found on <strong>/etc/fstab</strong> and paste the new <strong>UUID</strong> you got from <strong>blkid</strong>.</p>
<p>nano /etc/fstab</p>
<p># /etc/fstab: static file system information.<br>#</p>

        <h1 id="proc-proc-proc-defaults-0-0"   >
          <a href="#proc-proc-proc-defaults-0-0" class="heading-link"><i class="fas fa-link"></i></a>proc            /proc           proc    defaults        0       0</h1>
      
        <h1 id="dev-sda1"   >
          <a href="#dev-sda1" class="heading-link"><i class="fas fa-link"></i></a>/dev/sda1</h1>
      <p>UUID=8192a29b-e191-4347-a65c-3be8546a5c5c /               ext3    relatime,errors=remount-ro 0       1</p>

        <h1 id="dev-sda5"   >
          <a href="#dev-sda5" class="heading-link"><i class="fas fa-link"></i></a>/dev/sda5</h1>
      <p>UUID=b6a5fce4-9938-4518-809a-2cd0f5e194e8 none            swap    sw              0       0<br>/dev/scd0       /media/cdrom0   udf,iso9660 user,noauto,exec,utf8 0       0 </p>
<p>The last thing to do is reboot the system and check the available swap.</p>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ END ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">Author: </span><span class="copyright-author__value"><a href="http://linhost.info">Moody Gent</a></span></div><div class="copyright-link"><span class="copyright-link__name">Link: </span><span class="copyright-link__value"><a href="http://linhost.info/2009/04/22/restore-missing-swap-on-linux-system/">http://linhost.info/2009/04/22/restore-missing-swap-on-linux-system/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">Copyright: </span><span class="copyright-notice__value">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> unless stating additionally</span></div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://linhost.info/tags/linux/">linux</a></span><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://linhost.info/tags/swap/">swap</a></span></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2009/04/22/heidisql-client-for-mysql/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">HeidiSQL - client for MySQL</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2009/04/04/vmware-server-installation-error/"><span class="paginator-prev__text">VMware Server installation error</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">Catalog</span><span class="sidebar-nav-ov">Overview</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#blkid"><span class="toc-number">1.</span> <span class="toc-text">
          blkid</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution"><span class="toc-number">2.</span> <span class="toc-text">
          Solution</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#proc-proc-proc-defaults-0-0"><span class="toc-number"></span> <span class="toc-text">
          proc            &#x2F;proc           proc    defaults        0       0</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dev-sda1"><span class="toc-number"></span> <span class="toc-text">
          &#x2F;dev&#x2F;sda1</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dev-sda5"><span class="toc-number"></span> <span class="toc-text">
          &#x2F;dev&#x2F;sda5</span></a></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">hello world</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">357</div><div class="sidebar-ov-state-item__name">Archives</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">You have read </span><span class="sidebar-reading-info__num">0</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2020</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Moody Gent</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v5.0.0</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.1.1</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.1.1"></script><script src="/js/stun-boot.js?v=2.1.1"></script><script src="/js/scroll.js?v=2.1.1"></script><script src="/js/header.js?v=2.1.1"></script><script src="/js/sidebar.js?v=2.1.1"></script></body></html>