<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Restore missing swap on Linux system | Linhost.info</title>
  
  
  <meta name="description" content="site, site">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="generator" content="Hexo 2.6.0"/>

  <meta property="og:title" content="Restore missing swap on Linux system"/>
  <meta property="og:site_name" content="Linhost.info"/>

  
    <meta property="og:image" content=""/>
  

  <link href="/favicon.png" rel="shortcut icon">

  
    <link rel="stylesheet" href="/css/highlightjs/github.css">
  
  <script src="/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <link rel="alternate" href="/atom.xml" title="Linhost.info" type="application/atom+xml">

  <link href="/css/site.css" rel="stylesheet">
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <script type="text/javascript" src="/js/jquery.caption.min.js"></script>
  <link href="/css/captionjs.min.css" rel="stylesheet"/>
  <script type="text/javascript" src="/js/ewal.js"></script>

  
  




</head>

<body>
  

<div class="navbar navbar-default navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/"><span class="text-primary">Linhost.info</span></a>
    </div>
    <div class="collapse navbar-collapse navbar-right">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav pull-right">
      
      
      
      
      </ul>
    </div>
  </div>
</div>


  <div class="container">
    <div class="row">
      <div><article class="post">
  
    
  
    <h1 class="title">Restore missing swap on Linux system</h1>
  

    <div class="post-date">
      <time datetime="2009-04-22T18:50:18.000Z">2009-04-22</time>
    </div>
  
  <div class="post-content">
    
      <p>A fellow administrator had the task of re-allocating precious space on a server, that meant partitions would be moved around. Apparently during the process the swap partition was resized which resulted on the system loosing all of the available swap, despite the fact that the partition was never actually deleted. <img src="http://lh6.ggpht.com/_fF0LO28FGYY/SekmNh2a4bI/AAAAAAAAAjs/6ThjKR2hNyU/s800/001.png"> After noticing the problem I decided to check <strong>/etc/fstab</strong>, I could see an entry for swap at boot. However the partition was not being mount it during boot up, leading me to believe that the <strong>UUID</strong> might have changed. <strong>UUID</strong> - <em>Universally Unique Identifier</em></p>
<h2 id="blkid"><a href="#blkid" class="headerlink" title="blkid"></a>blkid</h2><p>First use the <strong>blkid</strong> program to determine the new <strong>UUID</strong> of the swap partition. Look for the entry with the <strong>TYPE=”swap”</strong> and copy the <strong>UUID</strong>.</p>
<p>$ blkid<br>/dev/ramzswap0: TYPE=”swap”<br>/dev/sda1: UUID=”8192a29b-e191-4347-a65c-3be8546a5c5c” TYPE=”ext3”<br>/dev/sda5: TYPE=”swap” UUID=”b6a5fce4-9938-4518-809a-2cd0f5e194e8”<br>/dev/loop0: TYPE=”squashfs”</p>
<p>Now open <strong>/etc/fstab</strong> and visually compare the swap <strong>UUID</strong> output from <strong>blkid</strong> with the current entry on <strong>fstab</strong> which should be different.</p>
<p>nano /etc/fstab</p>
<p>My swap partition is located in <strong>/dev/sda5</strong>.</p>
<p># /dev/sda5<br>UUID=55a68fbd-2f25-447b-99fd-02e972937a3c none            swap    sw              0       0</p>
<p>Because they are different the problem is evident the <strong>UUID</strong> changed, meaning the system no longer has the correct swap <strong>UUID</strong> to call on boot up.</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>The solution is simple just remove the old swap <strong>UUID</strong> entry found on <strong>/etc/fstab</strong> and paste the new <strong>UUID</strong> you got from <strong>blkid</strong>.</p>
<p>nano /etc/fstab</p>
<p># /etc/fstab: static file system information.<br>#</p>
<h1 id="proc-proc-proc-defaults-0-0"><a href="#proc-proc-proc-defaults-0-0" class="headerlink" title="proc            /proc           proc    defaults        0       0"></a>proc            /proc           proc    defaults        0       0</h1><h1 id="dev-sda1"><a href="#dev-sda1" class="headerlink" title="/dev/sda1"></a>/dev/sda1</h1><p>UUID=8192a29b-e191-4347-a65c-3be8546a5c5c /               ext3    relatime,errors=remount-ro 0       1</p>
<h1 id="dev-sda5"><a href="#dev-sda5" class="headerlink" title="/dev/sda5"></a>/dev/sda5</h1><p>UUID=b6a5fce4-9938-4518-809a-2cd0f5e194e8 none            swap    sw              0       0<br>/dev/scd0       /media/cdrom0   udf,iso9660 user,noauto,exec,utf8 0       0 </p>
<p>The last thing to do is reboot the system and check the available swap.</p>

    
  </div>
  
    
  
  <div class="categories">
    <a href="/categories/Article/">Article</a>
  </div>


    
  
  <div class="tags">
    <a href="/tags/linux/">linux</a>, <a href="/tags/swap/">swap</a>
  </div>

  
  <div class="addthis_toolbox addthis_default_style 
addthis_32x32_style" data-addthis-url="http://linhost.info/2009/04/restore-missing-swap-on-linux-system/" data-addthis-title="Restore missing swap on Linux system">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
  
    <ul class="next_prev">
      
        <li class="prev">
        <a class="btn btn-success" role="button" href="/2009/04/vmware-server-installation-error/">
          Previous
        </a></li>
      
      
        <li class="next">
        <a class="btn btn-success" role="button" href="/2009/04/heidisql-client-for-mysql/">
          Next
        </a></li>
      
    </ul>
  
  

</article>
</div>
    </div>
  </div>
  <div id="push"></div>
  <div class="navbar navbar-footer">
  <div class="container">
    <p class="navbar-center navbar-text">
      
      &copy; 2020 Linhost.info
      
    </p>
  </div>
</div>
  <script src="/js/bootstrap.min.js"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3282416-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






</body>
</html>