<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.1.1" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.1.1" type="image/png" sizes="32x32"><meta name="description" content="If you have ever manage network devices over long distance or even in a local area network you might want to keep an eye on the health of the network and the links they operate on. That’s a very good">
<meta property="og:type" content="article">
<meta property="og:title" content="Monitor network latency with SmokePing">
<meta property="og:url" content="http://linhost.info/2009/02/monitor-network-latency-with-smokeping/index.html">
<meta property="og:site_name" content="Linhost.info">
<meta property="og:description" content="If you have ever manage network devices over long distance or even in a local area network you might want to keep an eye on the health of the network and the links they operate on. That’s a very good">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://lh6.ggpht.com/_fF0LO28FGYY/SYPWE44LKfI/AAAAAAAAAa8/hDqzUnuQssY/s800/serv_config.png">
<meta property="og:image" content="http://lh5.ggpht.com/_fF0LO28FGYY/SYPWFDbRhKI/AAAAAAAAAbE/pYiG4lGdXX0/s800/loc_site.png">
<meta property="og:image" content="http://lh3.ggpht.com/_fF0LO28FGYY/SYPWFDCTYrI/AAAAAAAAAbM/RrCtGVs8bto/s800/rem_site.png">
<meta property="og:image" content="http://lh6.ggpht.com/_fF0LO28FGYY/SYdrDwDT-sI/AAAAAAAAAbs/nAJhYn7rQA0/s800/smokeping_resize.png">
<meta property="article:published_time" content="2009-02-05T05:01:26.000Z">
<meta property="article:modified_time" content="2020-08-09T09:07:53.396Z">
<meta property="article:author" content="Lven">
<meta property="article:tag" content="network">
<meta property="article:tag" content="smokeping">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://lh6.ggpht.com/_fF0LO28FGYY/SYPWE44LKfI/AAAAAAAAAa8/hDqzUnuQssY/s800/serv_config.png"><title>Monitor network latency with SmokePing | Linhost.info</title><link ref="canonical" href="http://linhost.info/2009/02/monitor-network-latency-with-smokeping/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.1.1"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><script src="https://www.googletagmanager.com/gtag/js?id=UA-3282416-1" async=""></script><script>if (window.location.hostname !== 'localhost') {
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'UA-3282416-1');
}</script><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: undefined,
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.0.0"><link rel="alternate" href="/atom.xml" title="Linhost.info" type="application/atom+xml">
</head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__text">Archives</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__text">menu.Home</span></a></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Linhost.info</div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">Monitor network latency with SmokePing</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2009-02-04</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2020-08-09</span></span></div></header><div class="post-body"><p>If you have ever manage network devices over long distance or even in a local area network you might want to keep an eye on the health of the network and the links they operate on. That’s a very good reason for using <strong>SmokePing</strong> on the network, SmokePing can graph over time the latency experienced by the probe. In the long run network monitoring can help identify trouble points or areas of interest. If you are paying for a T1 then you should get your moneys worth. There is nothing worse than having little or no data to troubleshoot network problems.</p>

        <h4 id="SmokePing-overview"   >
          <a href="#SmokePing-overview" class="heading-link"><i class="fas fa-link"></i></a>SmokePing overview</h4>
      <p>SmokePing generates graphs over time that show vital network information about the quality of the selected link being monitored by the probe. SmokePing can be easily configured to monitor multiple sites at the same time and show the specific time in which the link experienced unusual activity. It’s common knowledge that high latency will result on poor network performance. Prior to the installation you should have a full functional web server installed.</p>

        <h4 id="Examples"   >
          <a href="#Examples" class="heading-link"><i class="fas fa-link"></i></a>Examples</h4>
      <ul>
<li>Monitor the latency of the OpenDNS servers and make an informed decision on whether they are or not in your best interest.</li>
<li>Monitor links from the central office to the remote office. Constant and unusual high levels of latency may indicate a problem with the ISP.</li>
<li>Servers become unreachable during certain periods of the day. With the data log by the probe you can pin point the time of failure (disconnection).</li>
</ul>

        <h4 id="SmokePing-installation-on-Ubuntu"   >
          <a href="#SmokePing-installation-on-Ubuntu" class="heading-link"><i class="fas fa-link"></i></a>SmokePing installation on Ubuntu</h4>
      <p>SmokePing is available in the Ubuntu repositories. For Debian based Distributions you can use Apt-Get, installation may depend on you distribution.</p>
<p>sudo apt-get install smokeping</p>

        <h4 id="SmokePing-configuration"   >
          <a href="#SmokePing-configuration" class="heading-link"><i class="fas fa-link"></i></a>SmokePing configuration</h4>
      <p>The configuration file is located at <strong>/etc/smokeping/config</strong>. The configuration file I am using is organised to monitor two separate sites with multiple hosts. In real life this examples would represent the local site and the remote site. Copy of <a href="/download/code/config">SmokePing configuration file</a>. Open and edit.</p>
<p>sudo nano /etc/smokeping/config</p>
<p>To get SmokePing started let’s edit some of the basic options. I hope this is somewhat self explanatory, change the following values to match your server values.</p>
<ul>
<li>owner and contact</li>
<li>cgiurl</li>
<li>mailhost</li>
<li>to</li>
<li>from</li>
</ul>
<p><img src="http://lh6.ggpht.com/_fF0LO28FGYY/SYPWE44LKfI/AAAAAAAAAa8/hDqzUnuQssY/s800/serv_config.png"> Remember what I said about monitoring two separate sites, well one is the local area network (NETWORK1) and the other monitors colocated servers (NETWORK2). You can see the hierarchy “+++” represents the target host. Make changes as you see fit. In this case I am monitoring three network devices. Change the hostname to match your own, enter the IP address or domain name of the devices.</p>
<ul>
<li>++ NETWORK1 (Name of the network)</li>
<li>+++ LAN_ROUTER (Target host)</li>
</ul>
<p><img src="http://lh5.ggpht.com/_fF0LO28FGYY/SYPWFDbRhKI/AAAAAAAAAbE/pYiG4lGdXX0/s800/loc_site.png"> Same can be said about the second example (NETWORK2), again three network devices are being monitored. <img src="http://lh3.ggpht.com/_fF0LO28FGYY/SYPWFDCTYrI/AAAAAAAAAbM/RrCtGVs8bto/s800/rem_site.png"> After you are done with the changes save and restart SmokePing.</p>
<p>/etc/init.d/smokeping restart</p>
<p>Open your browser and go to the following address.</p>
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://www.domain.com/cgi-bin/smokeping.cgi" >http://www.domain.com/cgi-bin/smokeping.cgi</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><img src="http://lh6.ggpht.com/_fF0LO28FGYY/SYdrDwDT-sI/AAAAAAAAAbs/nAJhYn7rQA0/s800/smokeping_resize.png"> Give SmokePing some time to log the data. Try to experiment with the configuration file, but all try to keep the target host’s organized.</p>

        <h4 id="References"   >
          <a href="#References" class="heading-link"><i class="fas fa-link"></i></a>References</h4>
      <p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://oss.oetiker.ch/smokeping/doc/smokeping_examples.en.html" >SmokePing examples.en.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://oss.oetiker.ch/smokeping/" >SmokePing web site</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ END ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">Author: </span><span class="copyright-author__value"><a href="http://linhost.info">Lven</a></span></div><div class="copyright-link"><span class="copyright-link__name">Link: </span><span class="copyright-link__value"><a href="http://linhost.info/2009/02/monitor-network-latency-with-smokeping/">http://linhost.info/2009/02/monitor-network-latency-with-smokeping/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">Copyright: </span><span class="copyright-notice__value">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> unless stating additionally</span></div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://linhost.info/tags/network/">network</a></span><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://linhost.info/tags/smokeping/">smokeping</a></span></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2009/02/free-book-ubuntu-pocket-guide-and-reference/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">Ubuntu Pocket Guide (PDF download)</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2009/02/encrypt-files-with-openssl/"><span class="paginator-prev__text">Encrypt files with OpenSSL</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">Catalog</span><span class="sidebar-nav-ov">Overview</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#SmokePing-overview"><span class="toc-number">1.</span> <span class="toc-text">
          SmokePing overview</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Examples"><span class="toc-number">2.</span> <span class="toc-text">
          Examples</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SmokePing-installation-on-Ubuntu"><span class="toc-number">3.</span> <span class="toc-text">
          SmokePing installation on Ubuntu</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SmokePing-configuration"><span class="toc-number">4.</span> <span class="toc-text">
          SmokePing configuration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#References"><span class="toc-number">5.</span> <span class="toc-text">
          References</span></a></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">hello world</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">356</div><div class="sidebar-ov-state-item__name">Archives</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">You have read </span><span class="sidebar-reading-info__num">0</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2020</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Lven</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.1.1"></script><script src="/js/stun-boot.js?v=2.1.1"></script><script src="/js/scroll.js?v=2.1.1"></script><script src="/js/header.js?v=2.1.1"></script><script src="/js/sidebar.js?v=2.1.1"></script></body></html>