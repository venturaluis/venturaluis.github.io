<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Expand the Root Partition in Kali Linux for the Raspberry Pi | Linhost.info</title><meta name="description" content="Expand the Root Partition in Kali Linux for the Raspberry Pi - Moody Gent"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/theme.css"><link rel="search" type="application/opensearchdescription+xml" href="/atom.xml" title="Linhost.info"><meta name="generator" content="Hexo 5.0.0"><link rel="alternate" href="/atom.xml" title="Linhost.info" type="application/atom+xml">
</head><body><div class="wrap"><header><h1 class="branding"><a href="/" title="Linhost.info">Linhost.info</a></h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">HOME</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives" target="_self">ARCHIVES</a></li><li class="nav-list-item"><a class="nav-list-link" href="https://github.com/Dreyer" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link" href="/atom.xml" target="_self">RSS</a></li><li class="nav-list-item"><a class="nav-list-link" href="/VM" target="_self">VM</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Expand the Root Partition in Kali Linux for the Raspberry Pi</h1><div class="post-info"><a></a>2015-05-04</div><div class="post-content"><p>By default when Kali Linux for the Rapsberry Pi is installed the file system will only expand to occupy 3GB of storage, in my case I have a 16GB Micro SD card in my Raspberry Pi 2 with most of its capacity unused. One can easily expand the file system by making use of a script that automatically does the job for you. File system after install.</p>
<p>root@kali:~# df -h</p>
<p>Filesystem      Size  Used Avail Use% Mounted on<br>rootfs          2.9G  1.5G  1.2G  56% /<br>/dev/root       2.9G  1.5G  1.2G  56% /<br>devtmpfs        460M     0  460M   0% /dev<br>tmpfs            93M  468K   93M   1% /run<br>tmpfs           5.0M     0  5.0M   0% /run/lock<br>tmpfs           186M     0  186M   0% /run/shm</p>
<p>I should note I did not create the script and found it at the following address <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://www.raspberryvi.org/wiki/doku.php/raspi-expand-rootfs" >http://www.raspberryvi.org/wiki/doku.php/raspi-expand-rootfs</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> but it has proven useful. Download the script into the boot directory. Locally hosted.</p>
<p>root@kali:~# wget -O /boot/raspi-expand-rootfs.sh <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://dl.linhost.info/file1/raspi-expand-rootfs.sh" >http://dl.linhost.info/file1/raspi-expand-rootfs.sh</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>Now we make the script executable.</p>
<p>root@kali:~# chmod +x /boot/raspi-expand-rootfs.sh</p>
<p>And execute the script. Donâ€™t be scared by the output.</p>
<p>root@kali:~# sh /boot/raspi-expand-rootfs.sh</p>
<p>Command (m for help):<br>Disk /dev/mmcblk0: 15.9 GB, 15931539456 bytes<br>4 heads, 16 sectors/track, 486192 cylinders, total 31116288 sectors<br>Units = sectors of 1 * 512 = 512 bytes<br>Sector size (logical/physical): 512 bytes / 512 bytes<br>I/O size (minimum/optimal): 512 bytes / 512 bytes<br>Disk identifier: 0x000697c0</p>
<pre><code>    Device Boot      Start         End      Blocks   Id  System</code></pre>
<p>/dev/mmcblk0p1               1      125000       62500    c  W95 FAT32 (LBA)<br>/dev/mmcblk0p2          125001     6143999     3009499+  83  Linux</p>
<p>Command (m for help): Partition number (1-4):<br>Command (m for help): Partition type:<br>   p   primary (1 primary, 0 extended, 3 free)<br>   e   extended<br>Select (default p): Partition number (1-4, default 2): First sector (125001-31116287, default 125001): Last sector, +sectors or +size{K,M,G} (125001-31116287, default 31116287): Using default value 31116287</p>
<p>Command (m for help):<br>Disk /dev/mmcblk0: 15.9 GB, 15931539456 bytes<br>4 heads, 16 sectors/track, 486192 cylinders, total 31116288 sectors<br>Units = sectors of 1 * 512 = 512 bytes<br>Sector size (logical/physical): 512 bytes / 512 bytes<br>I/O size (minimum/optimal): 512 bytes / 512 bytes<br>Disk identifier: 0x000697c0</p>
<pre><code>    Device Boot      Start         End      Blocks   Id  System</code></pre>
<p>/dev/mmcblk0p1               1      125000       62500    c  W95 FAT32 (LBA)<br>/dev/mmcblk0p2          125001    31116287    15495643+  83  Linux</p>
<p>Command (m for help): The partition table has been altered!</p>
<p>Calling ioctl() to re-read partition table.</p>
<p>WARNING: Re-reading the partition table failed with error 16: Device or resource busy.<br>The kernel still uses the old table. The new table will be used at<br>the next reboot or after you run partprobe(8) or kpartx(8)<br>Syncing disks.<br>update-rc.d: using dependency based boot sequencing<br>update-rc.d: warning: default start runlevel arguments (2 3 4 5) do not match resize2fs_once Default-Start values (2 3 4 5 S)<br>update-rc.d: warning: default stop runlevel arguments (0 1 6) do not match resize2fs_once Default-Stop values (none)<br>Root partition has been resized. The filesystem will be enlarged upon the next reboot</p>
<p>It is necessary to reboot the OS for the changes to take effect.</p>
<p>root@kali:~# reboot</p>
<p>Once again us the <strong>df</strong> command to verify the file system successfully expanded.</p>
<p>root@kali:~# df -h</p>
<p>Filesystem      Size  Used Avail Use% Mounted on<br>rootfs           15G  1.5G   13G  11% /<br>/dev/root        15G  1.5G   13G  11% /<br>devtmpfs        460M     0  460M   0% /dev<br>tmpfs            93M  468K   93M   1% /run<br>tmpfs           5.0M  4.0K  5.0M   1% /run/lock<br>tmpfs           186M     0  186M   0% /run/shm</p>
<p>If you like you can remove the script from the <strong>/boot</strong> directory.</p>
<p>root@kali:~# rm /boot/raspi-expand-rootfs.sh</p>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2015/05/05/update-the-firmware-on-a-raspberry-pi/">prev</a><a class="next" href="/2015/04/28/auto-mount-usb-drives-in-raspbian/">next</a></div><div class="copyright"><p>&copy; 2016 - 2020 <a target="_blank" rel="noopener" href="https://www.example.org/john-doe">John Doe</a>.<br>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/Dreyer/hexo-theme-artemis" target="_blank">Artemis</a>.</p></div></footer></div><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12345678-9']);
_gaq.push(['_trackPageview']);

(function () {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>