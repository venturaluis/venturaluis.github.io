<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-3282416-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <title>Windows: FreeNAS Embedded Installation | Linhost.info</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="FreeNAS is available for download in two forms .ISO and .IMG. If all you want to do is try FreeNAS and possibly install then you should download the ISO. The .IMG is intended for embedded installs lik">
<meta property="og:type" content="article">
<meta property="og:title" content="Windows: FreeNAS Embedded Installation">
<meta property="og:url" content="http://linhost.info/2011/01/freenas-phydiskwrite-freenas-embedded-install-using-windows/index.html">
<meta property="og:site_name" content="Linhost.info">
<meta property="og:description" content="FreeNAS is available for download in two forms .ISO and .IMG. If all you want to do is try FreeNAS and possibly install then you should download the ISO. The .IMG is intended for embedded installs lik">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://lh4.ggpht.com/_fF0LO28FGYY/TSQ-9S_akFI/AAAAAAAAC2I/ifSqOggXh_g/s800/diskpart-1.png">
<meta property="og:image" content="http://lh3.ggpht.com/_fF0LO28FGYY/TSQ-9QjhI4I/AAAAAAAAC2M/7hpaSIDO60E/s800/diskpart-2.png">
<meta property="og:image" content="http://lh5.ggpht.com/_fF0LO28FGYY/TSQ-9gAu7rI/AAAAAAAAC2Q/1x6aYJXPfo8/s800/diskpart-3.png">
<meta property="og:image" content="http://lh3.ggpht.com/_fF0LO28FGYY/TSQ-9pQ8blI/AAAAAAAAC2U/0OGg8on2h9k/s800/diskpart-4.png">
<meta property="og:image" content="http://lh4.ggpht.com/_fF0LO28FGYY/TSQ_B59coDI/AAAAAAAAC2o/x-IWAHYaRBY/s800/diskpart-9.png">
<meta property="og:image" content="http://lh4.ggpht.com/_fF0LO28FGYY/TT0CgnSULYI/AAAAAAAAC5I/6uW8n6M3N80/s800/BIOS.png">
<meta property="og:image" content="http://lh3.ggpht.com/_fF0LO28FGYY/TT0JGhIPmhI/AAAAAAAAC5Q/EgsZDL9n50I/s800/freenas.png">
<meta property="article:published_time" content="2011-01-24T04:21:35.000Z">
<meta property="article:modified_time" content="2020-08-09T09:07:53.748Z">
<meta property="article:tag" content="freebsd">
<meta property="article:tag" content="NAS">
<meta property="article:tag" content="freenas">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://lh4.ggpht.com/_fF0LO28FGYY/TSQ-9S_akFI/AAAAAAAAC2I/ifSqOggXh_g/s800/diskpart-1.png">
  
    <link rel="alternate" href="/atom.xml" title="Linhost.info" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:100,300,400,700&amp;subset=korean" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!--<div id="banner"></div>-->
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        <a href="/" id="main-nav-title" class="main-nav-link">Linhost.info</a>
        
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-freenas-phydiskwrite-freenas-embedded-install-using-windows" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Article/">Article</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Windows: FreeNAS Embedded Installation
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>FreeNAS is available for download in two forms .ISO and .IMG. If all you want to do is try FreeNAS and possibly install then you should download the ISO. The .IMG is intended for embedded installs like the kind of install you do in USB flash drive or compact flash card. The thing about the embedded install is that unlike the .ISO the .IMG file includes no installer. Instead the user is expected to make use of third party tools to complete the installation. <strong>Before we can start the tutorial you will need the following:</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="http://freenas.org/#downloads">FreeNAS .IMG</a> (61MB file)</li>
<li>USB Flash drive or Compact Flash card larger than the .IMG file</li>
<li><a target="_blank" rel="noopener" href="http://m0n0.ch/wall/physdiskwrite.php">physdiskwrite</a> (3rd party tool), this is what will write the image</li>
</ul>
<p>Nix* users have DD to write images, in the case of Windows the closest tool available is physdiskwrite. With <a target="_blank" rel="noopener" href="http://m0n0.ch/wall/physdiskwrite.php">physdiskwrite</a> we can write the raw image to the storage media. Physdiskwrite is a command line tool, I will try my best to guide you trugh the commands. At the time of this tutorial the latest release for i386 is <em>FreeNAS-i386-embedded-0.7.2.5543.img</em>. <strong>I will break the tutorial in to two parts:</strong></p>
<ol>
<li>We will use Diskpart a windows tools that in this case will help us clean the storage media. Not performing this steps may perform in errors</li>
<li>Write the image with the help of Physdiskwrite</li>
</ol>
<h2 id="Working-With-Diskpart"><a href="#Working-With-Diskpart" class="headerlink" title="Working With Diskpart"></a>Working With Diskpart</h2><p>I recommend following the Diskpart steps below to avoid errors that may come up when writing the image. The steps below will clear the drive you intend to use for the installation. Open a command line window and type: <strong>Diskpart</strong> <img src="http://lh4.ggpht.com/_fF0LO28FGYY/TSQ-9S_akFI/AAAAAAAAC2I/ifSqOggXh_g/s800/diskpart-1.png"> Now list of all available drives: <strong>list disk</strong> <img src="http://lh3.ggpht.com/_fF0LO28FGYY/TSQ-9QjhI4I/AAAAAAAAC2M/7hpaSIDO60E/s800/diskpart-2.png"> The USB drive intend to use for the installation is listed as disk 3, select it: <strong>select disk 3</strong> <img src="http://lh5.ggpht.com/_fF0LO28FGYY/TSQ-9gAu7rI/AAAAAAAAC2Q/1x6aYJXPfo8/s800/diskpart-3.png"> And clean it by typing: <strong>clean</strong> <img src="http://lh3.ggpht.com/_fF0LO28FGYY/TSQ-9pQ8blI/AAAAAAAAC2U/0OGg8on2h9k/s800/diskpart-4.png"> Once the process is complete type: <strong>exit</strong> <img src="http://lh4.ggpht.com/_fF0LO28FGYY/TSQ_B59coDI/AAAAAAAAC2o/x-IWAHYaRBY/s800/diskpart-9.png"></p>
<h2 id="Write-The-Image-With-Physdiskwrite"><a href="#Write-The-Image-With-Physdiskwrite" class="headerlink" title="Write The Image With Physdiskwrite"></a>Write The Image With Physdiskwrite</h2><p>For the sake of simplicity I recommend placing both <em>Physdiskwrite.exe</em> and <em>FreeNAS-i386-embedded-x.x.x.xxxx.img</em> in the same folder. Open the command line and CD(move) to the location where the Physdiskwrite and the .img file are located. Type the command below to find the drive:</p>
<p>C:UsersLuisDocumentsIMG&gt;physdiskwrite.exe -u FreeNAS-i386-embedded-0.7.2.554.img<br>3.img</p>
<p>physdiskwrite v0.5.2 by Manuel Kasper Searching for physical drivesâ€¦</p>
<p>Information for .PhysicalDrive0:<br>   Windows:       cyl: 77825<br>                  tpc: 255<br>                  spt: 63<br>   C/H/S:         16383/16/63<br>   Model:         WDC WD6401AALS-00J7B1<br>   Serial number:      WD-WMATV3658664<br>   Firmware rev.: 05.00K05</p>
<p>Information for .PhysicalDrive1:<br>   Windows:       cyl: 121601<br>                  tpc: 255<br>                  spt: 63<br>   C/H/S:         16383/16/63<br>   Model:         WDC WD10EALS-00Z8A0<br>   Serial number:      WD-WCATR0751123<br>   Firmware rev.: 05.01D05</p>
<p>Information for .PhysicalDrive2:<br>   Windows:       cyl: 60801<br>                  tpc: 255<br>                  spt: 63<br>   C/H/S:         16383/16/63<br>   Model:         WDC WD5001AALS-00L3B2<br>   Serial number:      WD-WMASZ0056513<br>   Firmware rev.: 01.03B01</p>
<p>Information for .PhysicalDrive3:<br>   Windows:       cyl: 62<br>                  tpc: 255<br>                  spt: 63 </p>
<p>The output above tells us that PhysicalDrive3 is the removable drive. Which is why we select drive number 3 to write the image to.</p>
<p>Which disk do you want to write? (0..3) 3</p>
<p>Confirm you want to overwrite by typing <strong>Y</strong>.</p>
<p>About to overwrite the contents of disk 3 with new data. Proceed? (y/n) y<br>Found compressed image file<br>75350016/75350016 bytes written in total</p>
<p>Once the process is done close the terminal window. The image is now in the Flash drive.</p>
<h2 id="Other-Steps"><a href="#Other-Steps" class="headerlink" title="Other Steps"></a>Other Steps</h2><p>Keep in mind that in order to boot from a Flash drive you need to set the BIOS to boot from removable media. <img src="http://lh4.ggpht.com/_fF0LO28FGYY/TT0CgnSULYI/AAAAAAAAC5I/6uW8n6M3N80/s800/BIOS.png" alt="BIOS"> <img src="http://lh3.ggpht.com/_fF0LO28FGYY/TT0JGhIPmhI/AAAAAAAAC5Q/EgsZDL9n50I/s800/freenas.png" alt="FreeNAS"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://linhost.info/2011/01/freenas-phydiskwrite-freenas-embedded-install-using-windows/" data-id="ckiu07mzi00g2n6fx112q7l18" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NAS/" rel="tag">NAS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/freebsd/" rel="tag">freebsd</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/freenas/" rel="tag">freenas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2011/01/windows-how-to-compact-a-dynamic-vhd/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-caption">Newer</span>
      <div class="article-nav-title">
        
          Windows: How To Compact A Dynamic VHD
        
      </div>
    </a>
  
  
    <a href="/2010/12/symantec-endpoint-protection-offline-update/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-caption">Older</span>
      <div class="article-nav-title">Symantec Endpoint Protection Offline Update</div>
    </a>
  
</nav>

  
</article>

</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Linhost.info<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> with 
      theme_by <a href="http://hexo.io/" target="_blank">mango</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>