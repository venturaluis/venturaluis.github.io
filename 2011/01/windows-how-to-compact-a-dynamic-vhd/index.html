<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-3282416-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <title>Windows: How To Compact A Dynamic VHD | Linhost.info</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Making use of dynaminc VHDs or Virtual Hard Disks has the benefit of growing along with the users need. The downside is that even after files are deleted from a dynamic VHD it will remain the same siz">
<meta property="og:type" content="article">
<meta property="og:title" content="Windows: How To Compact A Dynamic VHD">
<meta property="og:url" content="http://linhost.info/2011/01/windows-how-to-compact-a-dynamic-vhd/index.html">
<meta property="og:site_name" content="Linhost.info">
<meta property="og:description" content="Making use of dynaminc VHDs or Virtual Hard Disks has the benefit of growing along with the users need. The downside is that even after files are deleted from a dynamic VHD it will remain the same siz">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://lh3.ggpht.com/_fF0LO28FGYY/TT0-dwJmSkI/AAAAAAAAC5o/nuUZUMXA02Q/s800/Windows_generic_h_web.jpg">
<meta property="og:image" content="http://lh5.ggpht.com/_fF0LO28FGYY/TT09oRqy1EI/AAAAAAAAC5k/LtTsXbpw-hU/s800/vhd-vdisk.png">
<meta property="article:published_time" content="2011-01-24T09:25:08.000Z">
<meta property="article:modified_time" content="2020-08-09T09:07:53.751Z">
<meta property="article:tag" content="windows">
<meta property="article:tag" content="vhd">
<meta property="article:tag" content="diskpart">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://lh3.ggpht.com/_fF0LO28FGYY/TT0-dwJmSkI/AAAAAAAAC5o/nuUZUMXA02Q/s800/Windows_generic_h_web.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Linhost.info" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:100,300,400,700&amp;subset=korean" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!--<div id="banner"></div>-->
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        <a href="/" id="main-nav-title" class="main-nav-link">Linhost.info</a>
        
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-windows-how-to-compact-a-dynamic-vhd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Article/">Article</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Windows: How To Compact A Dynamic VHD
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Making use of dynaminc VHDs or Virtual Hard Disks has the benefit of growing along with the users need. The downside is that even after files are deleted from a dynamic VHD it will remain the same size as if the files where never deleted. <img src="http://lh3.ggpht.com/_fF0LO28FGYY/TT0-dwJmSkI/AAAAAAAAC5o/nuUZUMXA02Q/s800/Windows_generic_h_web.jpg" title="Windows"> This becomes a problem if you make use of multiple VHDs because you are essentially wasting space on files that no longer exist. The solution is to Compact the VHD using <a target="_blank" rel="noopener" href="http://support.microsoft.com/kb/300415">Diskpart</a> a tool provided with Windows.</p>
<h3 id="Start-Compacting"><a href="#Start-Compacting" class="headerlink" title="Start Compacting"></a>Start Compacting</h3><p>Open a command line window and type:</p>
<p>diskpart</p>
<p>Select the disk you wish to compact by specifying the drive where the file is located and the path:</p>
<p>select vdisk file=”F:DAT100GB.vhd”</p>
<p>Attach the disk as <strong>Read-only</strong>:</p>
<p>attach vdisk readonly</p>
<p>And issue the command to compact:</p>
<p>compact vdisk</p>
<p><em>Depending on the size of the drive the operation may take some.</em> <img src="http://lh5.ggpht.com/_fF0LO28FGYY/TT09oRqy1EI/AAAAAAAAC5k/LtTsXbpw-hU/s800/vhd-vdisk.png"> Detach the VHD:</p>
<p>detach vdisk</p>
<p>In my case after compacting a 100GB VHD with 20GB of deleted data the size decreased to 82.2MB, Dynamic VHDs are useful but can also become the reason why disk space is low. If you have any questions leave a comment below.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://linhost.info/2011/01/windows-how-to-compact-a-dynamic-vhd/" data-id="ckiu07n700112n6fxcm3u6rju" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/diskpart/" rel="tag">diskpart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vhd/" rel="tag">vhd</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/windows/" rel="tag">windows</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2011/02/10-portable-applications-to-consider-part-1/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-caption">Newer</span>
      <div class="article-nav-title">
        
          10 Portable Applications To Consider - Part 1
        
      </div>
    </a>
  
  
    <a href="/2011/01/freenas-phydiskwrite-freenas-embedded-install-using-windows/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-caption">Older</span>
      <div class="article-nav-title">Windows: FreeNAS Embedded Installation</div>
    </a>
  
</nav>

  
</article>

</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Linhost.info<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> with 
      theme_by <a href="http://hexo.io/" target="_blank">mango</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>